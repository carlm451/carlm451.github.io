<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edge Signals &amp; the <strong>Discrete Curl</strong> — Topological Deep Learning Course</title>
<script>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']]},svg:{fontCache:'global'}};</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-svg-full.min.js"></script>
<link rel="stylesheet" href="../assets/style.css">
</head>
<body class="page-chapter">
<header>
  <div class="container">
    <div class="breadcrumb"><a href="../index.html">Home</a> / <a href="tdl-index.html">Topological Deep Learning</a> / Chapter 3</div>
    <span class="ch-num">Chapter 03</span>
    <h1>Edge Signals &amp; the <strong>Discrete Curl</strong></h1>
    <p class="subtitle">Promoting our graph to a simplicial complex, the boundary matrix B₁₂, 1-cochains, the discrete curl operator, and the Hodge Laplacian on edges.</p>
  </div>
</header>
<nav class="ch-nav"><div class="container"><a href="tdl-02-gnn.html">← Message Passing on Graphs</a><span class="ch-title">Chapter 3</span><a href="tdl-04-face-signals.html">Face Signals & the Hodge Story →</a></div></nav>
<div class="progress-bar"><div class="progress-fill"></div></div>
<main class="container" style="padding-top:2rem;padding-bottom:2rem;">

<!-- Table of Contents -->
<div class="toc">
  <div class="toc-label">In this chapter</div>
  <ol>
    <li><a href="#sec03"><span class="toc-num">03</span>Promoting the Graph to a Simplicial Complex</a></li>
    <li><a href="#sec04"><span class="toc-num">04</span>The Boundary Matrix B₁₂</a></li>
    <li><a href="#sec05"><span class="toc-num">05</span>Edge Signals and the Discrete Curl</a></li>
    <li><a href="#sec06"><span class="toc-num">06</span>The Hodge Laplacian on Edges: L₁</a></li>
  </ol>
</div>

<section id="sec03">
  <h2><span class="sec-num">03</span>Promoting the Graph to a Simplicial Complex</h2>

  <p>
    In Chapter 1, we worked with a graph: 4 vertices and 5 edges. That graph had no notion of "faces" — just points and connections. Now we <strong>fill in two triangles</strong> to create a 2-dimensional simplicial complex. This is the same graph, but with new rank-2 cells added.
  </p>

  <div class="def-box green">
    <div class="def-label">Our Running Example — Extended</div>
    <p>We keep all 4 vertices ($v_0, v_1, v_2, v_3$) and all 5 edges ($a$ through $e$) from Chapter 1, and add two triangular <strong>2-cells</strong> (faces):</p>
    <p style="margin-left:1.5rem;">
      $\sigma_1 = \{v_0, v_1, v_2\}$ — the triangle bounded by edges $a, b, c$<br>
      $\sigma_2 = \{v_0, v_2, v_3\}$ — the triangle bounded by edges $b, d, e$
    </p>
    <p>This satisfies the simplicial closure property: every edge of each triangle is present, and every vertex of each edge is present.</p>
  </div>

  <div class="figure">
    <svg viewBox="0 0 500 250" width="500" height="250">
      <!-- Face σ₁ -->
      <polygon points="80,110 210,70 210,170" fill="#a8c0e0" fill-opacity="0.25" stroke="#3a5a8c" stroke-width="1"/>
      <!-- Face σ₂ -->
      <polygon points="80,110 210,170 140,220" fill="#8ec5b6" fill-opacity="0.2" stroke="#2a6b5a" stroke-width="1"/>

      <!-- Edges -->
      <line x1="80" y1="110" x2="210" y2="70" stroke="#6b6560" stroke-width="2"/>
      <line x1="80" y1="110" x2="210" y2="170" stroke="#6b6560" stroke-width="2"/>
      <line x1="210" y1="70" x2="210" y2="170" stroke="#6b6560" stroke-width="2"/>
      <line x1="80" y1="110" x2="140" y2="220" stroke="#6b6560" stroke-width="2"/>
      <line x1="210" y1="170" x2="140" y2="220" stroke="#6b6560" stroke-width="2"/>

      <!-- Edge labels -->
      <text x="150" y="78" font-family="Source Sans 3" font-size="13" fill="#b44a2f" font-weight="600" text-anchor="middle">a</text>
      <text x="155" y="152" font-family="Source Sans 3" font-size="13" fill="#b44a2f" font-weight="600" text-anchor="middle">b</text>
      <text x="222" y="125" font-family="Source Sans 3" font-size="13" fill="#b44a2f" font-weight="600" text-anchor="middle">c</text>
      <text x="98" y="175" font-family="Source Sans 3" font-size="13" fill="#b44a2f" font-weight="600" text-anchor="middle">d</text>
      <text x="186" y="207" font-family="Source Sans 3" font-size="13" fill="#b44a2f" font-weight="600" text-anchor="middle">e</text>

      <!-- Face labels -->
      <text x="165" y="125" font-family="Source Sans 3" font-size="14" fill="#3a5a8c" font-weight="700" text-anchor="middle">σ₁</text>
      <text x="140" y="185" font-family="Source Sans 3" font-size="14" fill="#2a6b5a" font-weight="700" text-anchor="middle">σ₂</text>

      <!-- Vertices -->
      <circle cx="80" cy="110" r="16" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="210" cy="70" r="16" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="210" cy="170" r="16" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="140" cy="220" r="16" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <text x="80" y="115" fill="white" font-family="Source Sans 3" font-size="12" text-anchor="middle" font-weight="600">0</text>
      <text x="210" y="75" fill="white" font-family="Source Sans 3" font-size="12" text-anchor="middle" font-weight="600">1</text>
      <text x="210" y="175" fill="white" font-family="Source Sans 3" font-size="12" text-anchor="middle" font-weight="600">2</text>
      <text x="140" y="225" fill="white" font-family="Source Sans 3" font-size="12" text-anchor="middle" font-weight="600">3</text>

      <!-- Rank legend -->
      <rect x="300" y="55" width="170" height="150" rx="6" fill="#f8f4ee" stroke="#d5d0c8"/>
      <text x="315" y="78" font-family="Source Sans 3" font-size="11" font-weight="700" fill="#2a2520">Three ranks:</text>
      <circle cx="325" cy="98" r="8" fill="#e8a88a" stroke="#b44a2f" stroke-width="1.5"/>
      <text x="340" y="103" font-family="Source Sans 3" font-size="11" fill="#2a2520">Rank 0: 4 vertices</text>
      <line x1="315" y1="125" x2="335" y2="125" stroke="#6b6560" stroke-width="2.5"/>
      <text x="340" y="130" font-family="Source Sans 3" font-size="11" fill="#2a2520">Rank 1: 5 edges</text>
      <rect x="315" y="147" width="20" height="14" rx="2" fill="#a8c0e0" fill-opacity="0.4" stroke="#3a5a8c" stroke-width="1"/>
      <text x="340" y="160" font-family="Source Sans 3" font-size="11" fill="#2a2520">Rank 2: 2 faces</text>
      <text x="315" y="192" font-family="Source Sans 3" font-size="10" fill="#6b6560">Edge b is shared between</text>
      <text x="315" y="206" font-family="Source Sans 3" font-size="10" fill="#6b6560">both triangular faces.</text>
    </svg>
    <div class="caption"><strong>Figure 3.1.</strong> The Chapter 1 graph, now extended into a simplicial complex by adding two triangular 2-cells: $\sigma_1 = \{0,1,2\}$ (blue) and $\sigma_2 = \{0,2,3\}$ (green). Edge $b$ is shared between both faces. We now have objects at three ranks.</div>
  </div>

  <p>
    We now have the discrete de Rham chain at three levels: <strong>vertex signals</strong> (rank 0, which we studied thoroughly), <strong>edge signals</strong> (rank 1, this chapter), and <strong>face signals</strong> (rank 2, next chapter). The incidence matrices connecting them are $\mathbf{B}_1$ (vertices ↔ edges, from Chapter 1) and the new $\mathbf{B}_{1,2}$ (edges ↔ faces).
  </p>
</section>

<hr class="divider">

<section id="sec04">
  <h2><span class="sec-num">04</span>The Boundary Matrix $\mathbf{B}_{1,2}$</h2>

  <p>
    Just as $\mathbf{B}_1$ encoded which vertices bound each edge, $\mathbf{B}_{1,2}$ encodes which <strong>edges bound each face</strong>. And just as we needed to orient edges (pick a direction) to get signs, we now need to <strong>orient faces</strong> (pick a circulation direction).
  </p>

  <h3>Orienting a Triangle</h3>

  <p>
    A triangle $\{v_0, v_1, v_2\}$ is oriented by choosing a cyclic order of its vertices — say counterclockwise: $[v_0, v_1, v_2]$. Its <strong>oriented boundary</strong> is the cycle of edges traversed in that order:
  </p>

  <div class="math-block">
    <div class="math-label">Oriented boundary of a triangle</div>
    $$\partial \sigma_1 = \partial[v_0, v_1, v_2] = [v_0 \to v_1] + [v_1 \to v_2] + [v_2 \to v_0]$$
  </div>

  <p>
    Now, each edge already has its own orientation from Chapter 1 (e.g., $a: v_0 \to v_1$). If the boundary traversal <em>agrees</em> with the edge orientation, the entry is $+1$; if it <em>disagrees</em> (we traverse the edge backwards), the entry is $-1$.
  </p>

  <div class="figure">
    <svg viewBox="0 0 650 280" width="650" height="280">
      <text x="325" y="22" font-family="Source Sans 3" font-size="14" font-weight="700" fill="#2a2520" text-anchor="middle">Oriented Boundaries of the Two Faces</text>

      <!-- σ₁ -->
      <rect x="15" y="40" width="300" height="230" rx="8" fill="white" stroke="#3a5a8c" stroke-width="1.5"/>
      <text x="165" y="65" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#3a5a8c" text-anchor="middle">σ₁ = [v₀, v₁, v₂]</text>

      <polygon points="70,150 200,110 200,210" fill="#a8c0e0" fill-opacity="0.15" stroke="#3a5a8c" stroke-width="1"/>

      <!-- Edge a: 0→1 (agrees with boundary) -->
      <line x1="85" y1="145" x2="190" y2="115" stroke="#2a6b5a" stroke-width="2.5" marker-end="url(#arr-g)"/>
      <text x="140" y="118" font-family="Source Sans 3" font-size="11" fill="#2a6b5a" font-weight="600">a: 0→1 ✓ (+1)</text>

      <!-- Edge c: 1→2 (agrees) -->
      <line x1="205" y1="125" x2="205" y2="198" stroke="#2a6b5a" stroke-width="2.5" marker-end="url(#arr-g)"/>
      <text x="240" y="165" font-family="Source Sans 3" font-size="11" fill="#2a6b5a" font-weight="600">c: 1→2 ✓ (+1)</text>

      <!-- Edge b: boundary wants 2→0 but b is 0→2, reversed! -->
      <line x1="188" y1="210" x2="82" y2="155" stroke="#b44a2f" stroke-width="2.5" marker-end="url(#arr-r)"/>
      <text x="110" y="200" font-family="Source Sans 3" font-size="11" fill="#b44a2f" font-weight="600">b: need 2→0</text>
      <text x="110" y="216" font-family="Source Sans 3" font-size="11" fill="#b44a2f" font-weight="600">but b = 0→2 ✗ (−1)</text>

      <circle cx="70" cy="150" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="200" cy="110" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="200" cy="210" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <text x="55" y="155" font-family="Source Sans 3" font-size="10" fill="white" text-anchor="middle" font-weight="600">0</text>
      <text x="200" y="115" font-family="Source Sans 3" font-size="10" fill="white" text-anchor="middle" font-weight="600">1</text>
      <text x="200" y="215" font-family="Source Sans 3" font-size="10" fill="white" text-anchor="middle" font-weight="600">2</text>

      <text x="165" y="258" font-family="JetBrains Mono" font-size="12" fill="#3a5a8c" text-anchor="middle" font-weight="600">∂σ₁ = +a − b + c</text>

      <!-- σ₂ -->
      <rect x="335" y="40" width="300" height="230" rx="8" fill="white" stroke="#2a6b5a" stroke-width="1.5"/>
      <text x="485" y="65" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#2a6b5a" text-anchor="middle">σ₂ = [v₀, v₂, v₃]</text>

      <polygon points="390,150 520,210 460,230" fill="#8ec5b6" fill-opacity="0.15" stroke="#2a6b5a" stroke-width="1"/>

      <!-- Edge b: 0→2 (agrees) -->
      <line x1="403" y1="152" x2="510" y2="205" stroke="#2a6b5a" stroke-width="2.5" marker-end="url(#arr-g)"/>
      <text x="480" y="168" font-family="Source Sans 3" font-size="11" fill="#2a6b5a" font-weight="600">b: 0→2 ✓ (+1)</text>

      <!-- Edge e: 2→3 (agrees) -->
      <line x1="518" y1="215" x2="468" y2="228" stroke="#2a6b5a" stroke-width="2.5" marker-end="url(#arr-g)"/>
      <text x="530" y="230" font-family="Source Sans 3" font-size="11" fill="#2a6b5a" font-weight="600">e: 2→3 ✓ (+1)</text>

      <!-- Edge d: boundary wants 3→0 but d=0→3, reversed -->
      <line x1="455" y1="228" x2="398" y2="158" stroke="#b44a2f" stroke-width="2.5" marker-end="url(#arr-r)"/>
      <text x="395" y="210" font-family="Source Sans 3" font-size="11" fill="#b44a2f" font-weight="600">d: need 3→0</text>
      <text x="395" y="226" font-family="Source Sans 3" font-size="11" fill="#b44a2f" font-weight="600">but d = 0→3 ✗ (−1)</text>

      <circle cx="390" cy="150" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="520" cy="210" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="460" cy="230" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <text x="390" y="155" font-family="Source Sans 3" font-size="10" fill="white" text-anchor="middle" font-weight="600">0</text>
      <text x="520" y="215" font-family="Source Sans 3" font-size="10" fill="white" text-anchor="middle" font-weight="600">2</text>
      <text x="460" y="235" font-family="Source Sans 3" font-size="10" fill="white" text-anchor="middle" font-weight="600">3</text>

      <text x="485" y="258" font-family="JetBrains Mono" font-size="12" fill="#2a6b5a" text-anchor="middle" font-weight="600">∂σ₂ = +b − d + e</text>

      <defs>
        <marker id="arr-g" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#2a6b5a"/></marker>
        <marker id="arr-r" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#b44a2f"/></marker>
      </defs>
    </svg>
    <div class="caption"><strong>Figure 4.1.</strong> Oriented boundaries of the two faces. Green arrows mark edges whose orientation agrees with the boundary traversal (+1). Red arrows mark edges traversed opposite to their assigned orientation (−1). The boundary formula sums the edges with these signs.</div>
  </div>

  <h3>The Full $\mathbf{B}_{1,2}$ Matrix</h3>

  <p>Assembling the boundary formulas $\partial\sigma_1 = a - b + c$ and $\partial\sigma_2 = b - d + e$ into a matrix (rows = edges, columns = faces):</p>

  <div class="figure">
    <svg viewBox="0 0 600 200" width="600" height="200">
      <text x="130" y="25" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#2a2520" text-anchor="middle">B₁₂ (5 edges × 2 faces)</text>

      <text x="108" y="52" font-family="JetBrains Mono" font-size="11" fill="#6b6560" text-anchor="middle">σ₁  σ₂</text>
      <text x="35" y="75" font-family="JetBrains Mono" font-size="12" fill="#2a2520">a</text>
      <text x="35" y="97" font-family="JetBrains Mono" font-size="12" fill="#2a2520">b</text>
      <text x="35" y="119" font-family="JetBrains Mono" font-size="12" fill="#2a2520">c</text>
      <text x="35" y="141" font-family="JetBrains Mono" font-size="12" fill="#2a2520">d</text>
      <text x="35" y="163" font-family="JetBrains Mono" font-size="12" fill="#2a2520">e</text>

      <text x="55" y="75" font-family="JetBrains Mono" font-size="13" fill="#2a2520">[ <tspan fill="#2a6b5a" font-weight="600">+1</tspan>   0 ]</text>
      <text x="55" y="97" font-family="JetBrains Mono" font-size="13" fill="#2a2520">[ <tspan fill="#b44a2f" font-weight="600">−1</tspan>  <tspan fill="#2a6b5a" font-weight="600">+1</tspan> ]</text>
      <text x="55" y="119" font-family="JetBrains Mono" font-size="13" fill="#2a2520">[ <tspan fill="#2a6b5a" font-weight="600">+1</tspan>   0 ]</text>
      <text x="55" y="141" font-family="JetBrains Mono" font-size="13" fill="#2a2520">[  0  <tspan fill="#b44a2f" font-weight="600">−1</tspan> ]</text>
      <text x="55" y="163" font-family="JetBrains Mono" font-size="13" fill="#2a2520">[  0  <tspan fill="#2a6b5a" font-weight="600">+1</tspan> ]</text>

      <!-- Annotations -->
      <text x="200" y="97" font-family="Source Sans 3" font-size="10.5" fill="#6b6560">← edge b appears in both faces (shared boundary)</text>
      <text x="200" y="141" font-family="Source Sans 3" font-size="10.5" fill="#6b6560">← edge d only in σ₂, with reversed orientation</text>

      <!-- Verify ∂² = 0 -->
      <rect x="250" y="25" width="320" height="60" rx="6" fill="#f8f4ee" stroke="#d5d0c8"/>
      <text x="265" y="47" font-family="Source Sans 3" font-size="11" font-weight="700" fill="#b44a2f">Verify ∂² = 0: B₁ · B₁₂ = ?</text>
      <text x="265" y="72" font-family="Source Sans 3" font-size="11" fill="#2a2520">Each column of B₁·B₁₂ sums the signed vertices around a face loop → always <tspan font-weight="600" fill="#2a6b5a">0</tspan> ✓</text>
    </svg>
    <div class="caption"><strong>Figure 4.2.</strong> The incidence matrix $\mathbf{B}_{1,2}$ connecting edges to faces. Column $\sigma_1$ encodes $\partial\sigma_1 = a - b + c$; column $\sigma_2$ encodes $\partial\sigma_2 = b - d + e$. The product $\mathbf{B}_1 \cdot \mathbf{B}_{1,2} = \mathbf{0}$ — this is the discrete $\partial^2 = 0$ identity.</div>
  </div>

  <div class="insight physics">
    <p><strong>Physics meaning of $\partial^2 = 0$:</strong> The boundary of a boundary is empty. Walk around the edge of face $\sigma_1$: you visit vertices $v_0 \to v_1 \to v_2 \to v_0$, returning to where you started. Each vertex is entered and exited — the net "vertex charge" is zero. This is why $\nabla \times (\nabla f) = 0$ (curl of gradient is zero) — it's the same identity one dimension up.</p>
  </div>
</section>

<hr class="divider">

<section id="sec05">
  <h2><span class="sec-num">05</span>Edge Signals and the Discrete Curl</h2>

  <p>
    A <strong>1-cochain</strong> (edge signal) assigns a value to each edge — think of it as a flow, a current, or a velocity field component along each edge. The coboundary operator $\mathbf{B}_{1,2}^\top$ acts as the <strong>discrete curl</strong>: it measures the net circulation of an edge signal around each face.
  </p>

  <div class="def-box blue">
    <div class="def-label">Definition — Discrete Curl</div>
    <p>For an edge signal $\mathbf{f} \in \mathbb{R}^5$ (one value per edge), the <strong>curl</strong> is:</p>
    $$(\text{curl}\;\mathbf{f})_\sigma = (\mathbf{B}_{1,2}^\top \mathbf{f})_\sigma = \sum_{e \in \partial\sigma} [\text{sign}] \cdot f_e$$
    <p>This sums the edge values around face $\sigma$, with signs determined by orientation agreement. A nonzero curl means there is <em>net circulation</em> around that face.</p>
  </div>

  <h3>Worked Example</h3>

  <p>Consider the edge signal $\mathbf{f} = (2, -1, 3, 0, 1)^\top$ on edges $a, b, c, d, e$ — imagine these as flow rates along each edge:</p>

  <div class="figure">
    <svg viewBox="0 0 650 260" width="650" height="260">
      <text x="325" y="22" font-family="Source Sans 3" font-size="14" font-weight="700" fill="#2a2520" text-anchor="middle">Discrete Curl: Measuring Circulation Around Faces</text>

      <!-- Complex with flow values -->
      <polygon points="80,120 210,80 210,180" fill="#a8c0e0" fill-opacity="0.15" stroke="#3a5a8c" stroke-width="1"/>
      <polygon points="80,120 210,180 140,230" fill="#8ec5b6" fill-opacity="0.12" stroke="#2a6b5a" stroke-width="1"/>

      <line x1="80" y1="120" x2="210" y2="80" stroke="#6b6560" stroke-width="2"/>
      <line x1="80" y1="120" x2="210" y2="180" stroke="#6b6560" stroke-width="2"/>
      <line x1="210" y1="80" x2="210" y2="180" stroke="#6b6560" stroke-width="2"/>
      <line x1="80" y1="120" x2="140" y2="230" stroke="#6b6560" stroke-width="2"/>
      <line x1="210" y1="180" x2="140" y2="230" stroke="#6b6560" stroke-width="2"/>

      <!-- Flow values on edges -->
      <rect x="130" y="80" width="30" height="18" rx="3" fill="#b44a2f"/>
      <text x="145" y="93" font-family="JetBrains Mono" font-size="10" fill="white" text-anchor="middle" font-weight="500">+2</text>
      <rect x="130" y="140" width="30" height="18" rx="3" fill="#3a5a8c"/>
      <text x="145" y="153" font-family="JetBrains Mono" font-size="10" fill="white" text-anchor="middle" font-weight="500">−1</text>
      <rect x="216" y="120" width="30" height="18" rx="3" fill="#b44a2f"/>
      <text x="231" y="133" font-family="JetBrains Mono" font-size="10" fill="white" text-anchor="middle" font-weight="500">+3</text>
      <rect x="90" y="175" width="26" height="18" rx="3" fill="#888"/>
      <text x="103" y="188" font-family="JetBrains Mono" font-size="10" fill="white" text-anchor="middle" font-weight="500">0</text>
      <rect x="178" y="208" width="30" height="18" rx="3" fill="#2a6b5a"/>
      <text x="193" y="221" font-family="JetBrains Mono" font-size="10" fill="white" text-anchor="middle" font-weight="500">+1</text>

      <text x="135" y="75" font-family="Source Sans 3" font-size="10" fill="#6b6560" text-anchor="middle">a</text>
      <text x="126" y="140" font-family="Source Sans 3" font-size="10" fill="#6b6560" text-anchor="middle">b</text>
      <text x="218" y="116" font-family="Source Sans 3" font-size="10" fill="#6b6560" text-anchor="middle">c</text>
      <text x="84" y="175" font-family="Source Sans 3" font-size="10" fill="#6b6560" text-anchor="middle">d</text>
      <text x="180" y="205" font-family="Source Sans 3" font-size="10" fill="#6b6560" text-anchor="middle">e</text>

      <circle cx="80" cy="120" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="210" cy="80" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="210" cy="180" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>
      <circle cx="140" cy="230" r="12" fill="#e8a88a" stroke="#b44a2f" stroke-width="2"/>

      <!-- Computation -->
      <rect x="300" y="55" width="330" height="185" rx="8" fill="#f8f4ee" stroke="#d5d0c8"/>
      <text x="315" y="80" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#3a5a8c">Curl at σ₁ (boundary: +a − b + c):</text>
      <text x="315" y="103" font-family="JetBrains Mono" font-size="12" fill="#2a2520">(+1)(2) + (−1)(−1) + (+1)(3)</text>
      <text x="315" y="123" font-family="JetBrains Mono" font-size="12" fill="#3a5a8c" font-weight="600">= 2 + 1 + 3 = 6  ← strong vortex!</text>

      <text x="315" y="155" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#2a6b5a">Curl at σ₂ (boundary: +b − d + e):</text>
      <text x="315" y="178" font-family="JetBrains Mono" font-size="12" fill="#2a2520">(+1)(−1) + (−1)(0) + (+1)(1)</text>
      <text x="315" y="198" font-family="JetBrains Mono" font-size="12" fill="#2a6b5a" font-weight="600">= −1 + 0 + 1 = 0  ← irrotational</text>

      <text x="315" y="228" font-family="Source Sans 3" font-size="11" fill="#6b6560">curl f = B₁₂ᵀf = (6, 0)ᵀ</text>
    </svg>
    <div class="caption"><strong>Figure 5.1.</strong> Computing the discrete curl. The edge signal $\mathbf{f} = (2,-1,3,0,1)$ has strong counterclockwise circulation around $\sigma_1$ (curl = 6) but zero net circulation around $\sigma_2$ (curl = 0). This is the exact analogue of $\nabla \times \mathbf{F}$ evaluated on each face.</div>
  </div>

  <h3>The Gradient–Curl Identity: curl(grad) = 0</h3>

  <p>
    If an edge signal is the <em>gradient</em> of a vertex potential — $\mathbf{f} = \mathbf{B}_1^\top \boldsymbol{\phi}$ for some vertex signal $\boldsymbol{\phi}$ — then its curl is automatically zero:
  </p>

  <div class="math-block">
    <div class="math-label">The fundamental identity</div>
    $$\mathbf{B}_{1,2}^\top (\mathbf{B}_1^\top \boldsymbol{\phi}) = (\mathbf{B}_{1,2}^\top \mathbf{B}_1^\top) \boldsymbol{\phi} = \mathbf{0} \cdot \boldsymbol{\phi} = \mathbf{0}$$
  </div>

  <div class="figure">
    <svg viewBox="0 0 650 160" width="650" height="160">
      <rect x="15" y="10" width="620" height="135" rx="8" fill="#f8f4ee" stroke="#d5d0c8"/>
      <text x="30" y="35" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#b44a2f">Numerical verification with φ = (10, 5, 8, 3):</text>

      <text x="30" y="60" font-family="JetBrains Mono" font-size="11" fill="#2a2520">Step 1: grad φ = B₁ᵀφ = (5−10, 8−10, 8−5, 3−10, 3−8)ᵀ</text>
      <text x="30" y="78" font-family="JetBrains Mono" font-size="11" fill="#2a6b5a" font-weight="600">                     = (−5, −2, 3, −7, −5)ᵀ</text>

      <text x="30" y="105" font-family="JetBrains Mono" font-size="11" fill="#2a2520">Step 2: curl(grad φ) = B₁₂ᵀ(−5,−2,3,−7,−5)ᵀ</text>
      <text x="30" y="123" font-family="JetBrains Mono" font-size="11" fill="#2a2520">  σ₁: (+1)(−5) + (−1)(−2) + (+1)(3) = −5+2+3 = <tspan fill="#2a6b5a" font-weight="600">0</tspan> ✓</text>
      <text x="30" y="141" font-family="JetBrains Mono" font-size="11" fill="#2a2520">  σ₂: (+1)(−2) + (−1)(−7) + (+1)(−5) = −2+7−5 = <tspan fill="#2a6b5a" font-weight="600">0</tspan> ✓</text>
    </svg>
    <div class="caption"><strong>Figure 5.2.</strong> A gradient field has zero curl — verified numerically. The potential differences around any closed loop always cancel, just like in electrostatics: $\oint \nabla\phi \cdot d\mathbf{l} = 0$.</div>
  </div>
</section>

<hr class="divider">

<section id="sec06">
  <h2><span class="sec-num">06</span>The Hodge Laplacian on Edges: $\mathbf{L}_1$</h2>

  <p>
    In Chapter 1, the graph Laplacian $\mathbf{L}_0 = \mathbf{B}_1\mathbf{B}_1^\top$ governed diffusion on <em>vertices</em>. Now we need an analogous operator for <em>edges</em>. The <strong>Hodge Laplacian</strong> $\mathbf{L}_1$ combines information from <em>both</em> the rank below (vertices) and the rank above (faces):
  </p>

  <div class="def-box purple">
    <div class="def-label">Definition — Hodge Laplacian on Edges</div>
    $$\mathbf{L}_1 = \underbrace{\mathbf{B}_1^\top \mathbf{B}_1}_{\mathbf{L}_1^{\text{down}}\;(5 \times 5)} + \underbrace{\mathbf{B}_{1,2} \mathbf{B}_{1,2}^\top}_{\mathbf{L}_1^{\text{up}}\;(5 \times 5)}$$
    <p>The <strong>lower Laplacian</strong> $\mathbf{L}_1^{\text{down}}$ captures how edges relate through shared vertices (below). The <strong>upper Laplacian</strong> $\mathbf{L}_1^{\text{up}}$ captures how edges relate through shared faces (above). Together they measure how an edge signal deviates from being both curl-free <em>and</em> divergence-free.</p>
  </div>

  <h3>Computing $\mathbf{L}_1$ Step by Step</h3>

  <div class="figure">
    <svg viewBox="0 0 700 420" width="700" height="420">
      <text x="350" y="22" font-family="Source Sans 3" font-size="14" font-weight="700" fill="#2a2520" text-anchor="middle">Building the Hodge Laplacian L₁ = L₁ᵈᵒʷⁿ + L₁ᵘᵖ</text>

      <!-- L1_down -->
      <rect x="15" y="42" width="325" height="170" rx="8" fill="white" stroke="#8b5a8c" stroke-width="1.5"/>
      <text x="177" y="65" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#8b5a8c" text-anchor="middle">L₁ᵈᵒʷⁿ = B₁ᵀB₁ (via shared vertices)</text>
      <text x="30" y="90" font-family="JetBrains Mono" font-size="10" fill="#6b6560">   a  b  c  d  e</text>
      <text x="30" y="108" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">a[ 2  1 -1  1  0]</text>
      <text x="30" y="124" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">b[ 1  2  1  1 -1]</text>
      <text x="30" y="140" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">c[-1  1  2  0 -1]</text>
      <text x="30" y="156" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">d[ 1  1  0  2  1]</text>
      <text x="30" y="172" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">e[ 0 -1 -1  1  2]</text>
      <text x="30" y="200" font-family="Source Sans 3" font-size="10" fill="#6b6560">Diagonal = # shared vertices per edge (always 2)</text>

      <!-- L1_up -->
      <rect x="360" y="42" width="325" height="170" rx="8" fill="white" stroke="#3a5a8c" stroke-width="1.5"/>
      <text x="522" y="65" font-family="Source Sans 3" font-size="12" font-weight="700" fill="#3a5a8c" text-anchor="middle">L₁ᵘᵖ = B₁₂B₁₂ᵀ (via shared faces)</text>
      <text x="375" y="90" font-family="JetBrains Mono" font-size="10" fill="#6b6560">   a  b  c  d  e</text>
      <text x="375" y="108" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">a[ 1 -1  1  0  0]</text>
      <text x="375" y="124" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">b[-1  2 -1 -1  1]</text>
      <text x="375" y="140" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">c[ 1 -1  1  0  0]</text>
      <text x="375" y="156" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">d[ 0 -1  0  1 -1]</text>
      <text x="375" y="172" font-family="JetBrains Mono" font-size="10.5" fill="#2a2520">e[ 0  1  0 -1  1]</text>
      <text x="375" y="200" font-family="Source Sans 3" font-size="10" fill="#6b6560">Diagonal = # faces each edge bounds (1 or 2)</text>

      <!-- L1 total -->
      <text x="350" y="240" font-family="Source Sans 3" font-size="22" fill="#b0a89e" text-anchor="middle">+</text>
      <text x="350" y="260" font-family="Source Sans 3" font-size="14" fill="#2a2520" text-anchor="middle" font-weight="600">=</text>

      <rect x="130" y="275" width="440" height="130" rx="8" fill="white" stroke="#b44a2f" stroke-width="2"/>
      <text x="350" y="300" font-family="Source Sans 3" font-size="13" font-weight="700" fill="#b44a2f" text-anchor="middle">L₁ = L₁ᵈᵒʷⁿ + L₁ᵘᵖ (full Hodge Laplacian on edges)</text>
      <text x="200" y="327" font-family="JetBrains Mono" font-size="12" fill="#6b6560">  a  b  c  d  e</text>
      <text x="185" y="347" font-family="JetBrains Mono" font-size="12" fill="#2a2520">a[<tspan fill="#b44a2f" font-weight="600"> 3</tspan>  0  0  1  0]</text>
      <text x="185" y="363" font-family="JetBrains Mono" font-size="12" fill="#2a2520">b[ 0 <tspan fill="#b44a2f" font-weight="600"> 4</tspan>  0  0  0]</text>
      <text x="185" y="379" font-family="JetBrains Mono" font-size="12" fill="#2a2520">c[ 0  0 <tspan fill="#b44a2f" font-weight="600"> 3</tspan>  0 -1]</text>
      <text x="185" y="395" font-family="JetBrains Mono" font-size="12" fill="#2a2520">d[ 1  0  0 <tspan fill="#b44a2f" font-weight="600"> 3</tspan>  0]</text>
      <text x="185" y="411" font-family="JetBrains Mono" font-size="12" fill="#2a2520">e[ 0  0 -1  0 <tspan fill="#b44a2f" font-weight="600"> 3</tspan>]</text>

      <text x="460" y="350" font-family="Source Sans 3" font-size="10.5" fill="#6b6560">Edge b (shared between</text>
      <text x="460" y="366" font-family="Source Sans 3" font-size="10.5" fill="#6b6560">both faces) has the</text>
      <text x="460" y="382" font-family="Source Sans 3" font-size="10.5" fill="#6b6560">highest diagonal value (4)</text>
    </svg>
    <div class="caption"><strong>Figure 6.1.</strong> Construction of the Hodge Laplacian on edges. The lower part (from shared vertices) and upper part (from shared faces) combine to give $\mathbf{L}_1$. Note that $\mathbf{L}_1$ is <em>not</em> simply the graph Laplacian on edges — it incorporates higher-order structure from the faces. Eigenvalues: $\lambda = (2, 2, 4, 4, 4)$ — no zero eigenvalue, meaning $\beta_1 = 0$ (no independent loops).</div>
  </div>

  <div class="insight key">
    <p><strong>The two parts have different physics:</strong> $\mathbf{L}_1^{\text{down}}$ measures how an edge signal fails to be <em>divergence-free</em> (related to the gradient part). $\mathbf{L}_1^{\text{up}}$ measures how it fails to be <em>curl-free</em> (related to the face circulation). An edge signal in the kernel of $\mathbf{L}_1$ (a <strong>harmonic 1-cochain</strong>) is simultaneously divergence-free <em>and</em> curl-free — it represents a topological feature of the complex (an independent loop). Here $\ker \mathbf{L}_1 = \{0\}$, meaning there are no such loops: every cycle is the boundary of some combination of faces.</p>
  </div>

  <div class="insight physics">
    <p><strong>EM analogy:</strong> On a simplicial mesh, $\mathbf{L}_1^{\text{down}}$ is the discrete $\nabla(\nabla\cdot)$ and $\mathbf{L}_1^{\text{up}}$ is the discrete $-\nabla\times(\nabla\times)$. Their sum $\mathbf{L}_1 = \nabla(\nabla\cdot) - \nabla\times(\nabla\times)$ is the vector Laplacian $\nabla^2$ — this is the vector identity $\nabla^2\mathbf{F} = \nabla(\nabla\cdot\mathbf{F}) - \nabla\times(\nabla\times\mathbf{F})$ made discrete.</p>
  </div>
</section>

<div class="footer-nav"><a href="tdl-02-gnn.html"><span class="dir">← Previous</span><span class="title">Message Passing on Graphs</span></a><a class="next" href="tdl-04-face-signals.html"><span class="dir">Next →</span><span class="title">Face Signals & the Hodge Story</span></a></div>
</main>
<footer><p><a href="tdl-index.html">← Course Home</a> · <a href="../index.html">All Notes</a></p></footer>
<a href="#" class="back-to-top" aria-label="Back to top">&#8593;</a>
<script>
const fill = document.querySelector('.progress-fill');
const main = document.querySelector('main');
function updateProgress() {
  const top = main.getBoundingClientRect().top;
  const height = main.scrollHeight - window.innerHeight;
  const pct = Math.min(100, Math.max(0, (-top / height) * 100));
  fill.style.width = pct + '%';
}
const btn = document.querySelector('.back-to-top');
function updateBtn() {
  btn.classList.toggle('visible', window.scrollY > 600);
}
window.addEventListener('scroll', function() { updateProgress(); updateBtn(); }, { passive: true });
updateProgress();
</script>
</body>
</html>